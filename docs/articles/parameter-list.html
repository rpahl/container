<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Manage parameter lists with dict • container</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Manage parameter lists with dict">
<meta property="og:description" content="container">
<meta property="og:image" content="https://github.com/rpahl/container/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">container</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/container.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/code-development.html">When and how to use container for code development</a>
    </li>
    <li>
      <a href="../articles/manage-data-columns.html">Manage data columns with dict.table</a>
    </li>
    <li>
      <a href="../articles/parameter-list.html">Manage parameter lists with dict</a>
    </li>
    <li>
      <a href="../articles/reference-semantics.html">Reference semantics</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rpahl/container/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="parameter-list_files/header-attrs-2.11/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Manage parameter lists with dict</h1>
            
            <h4 class="date">2021-10-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/rpahl/container/blob/master/vignettes/parameter-list.Rmd"><code>vignettes/parameter-list.Rmd</code></a></small>
      <div class="hidden name"><code>parameter-list.Rmd</code></div>

    </div>

    
    
<div id="motivation" class="section level2">
<h2 class="hasAnchor">
<a href="#motivation" class="anchor"></a>Motivation</h2>
<p>The original motivation for the development of this package actually was that the author found himself writing countless checks and helper code over and over again when managing parameter lists in larger applications. It became apparent that something similar to python’s dictionary would make life easier and so the idea of the container package was born.</p>
<p>The package has undergone some changes since it’s initial version, but the <em>dict</em> as a use-case for parameter lists remains very valid. So without further ado, let’s see how this works out in practice.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rpahl/container">container</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="co"># Define some parameters</span>
<span class="va">params</span> <span class="op">=</span> <span class="fu"><a href="../reference/DictS3.html">dict</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, b <span class="op">=</span> <span class="st">"foo"</span><span class="op">)</span></code></pre></div>
</div>
<div id="add-or-replace" class="section level2">
<h2 class="hasAnchor">
<a href="#add-or-replace" class="anchor"></a>Add or Replace</h2>
<p>With a <em>dict</em> the problem of accidentally overriding an existing parameter value is solved out of the box using the <code>add</code> function.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">params</span> <span class="op">=</span> <span class="fu"><a href="../reference/add.html">add</a></span><span class="op">(</span><span class="va">params</span>, a <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>
<span class="co"># Error: name 'a' exists already</span>
<span class="fu"><a href="../reference/add.html">add</a></span><span class="op">(</span><span class="va">params</span>, x <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="co"># ok</span>
<span class="co"># {a = (1L 2L 3L 4L ...), b = "foo", x = 0}</span></code></pre></div>
<p>Of course, it’s also possible to indeed override a parameter.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">params</span>, a <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>
<span class="co"># {a = 0, b = "foo"}</span></code></pre></div>
<p>What if you intend to replace something, but there is nothing to replace?</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">params</span>, x <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>
<span class="co"># Error: names(s) not found: 'x'</span></code></pre></div>
<p>Now you might wonder, what if <em>‘I don’t care if it is replaced or added’</em>. That’s easy.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">params</span>, a <span class="op">=</span> <span class="fl">0</span>, .add<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>
<span class="co"># {a = 0, b = "foo"}</span>
<span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">params</span>, x <span class="op">=</span> <span class="fl">0</span>, .add<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>
<span class="co"># {a = (1L 2L 3L 4L ...), b = "foo", x = 0}</span></code></pre></div>
<p>That is, using <code>.add = TRUE</code> basically means, <em>‘replace it, or, if it is not there, just add it’</em></p>
<p>Maybe you agree that even these simple use-cases already require some effort when using base R lists.</p>
</div>
<div id="extract" class="section level2">
<h2 class="hasAnchor">
<a href="#extract" class="anchor"></a>Extract</h2>
<p>When extracting a parameter, you might want to be sure it exists and signal an error otherwise.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/at.html">at</a></span><span class="op">(</span><span class="va">params</span>, <span class="st">"x"</span><span class="op">)</span>
<span class="co"># Error: index 'x' not found</span>
<span class="fu"><a href="../reference/at.html">at</a></span><span class="op">(</span><span class="va">params</span>, <span class="st">"a"</span>, <span class="st">"b"</span><span class="op">)</span>
<span class="co"># {a = (1L 2L 3L 4L ...), b = "foo"}</span></code></pre></div>
<p>To extract a single raw element, use <code>at2</code></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/at2.html">at2</a></span><span class="op">(</span><span class="va">params</span>, <span class="st">"a"</span><span class="op">)</span>
<span class="co">#  [1]  1  2  3  4  5  6  7  8  9 10</span></code></pre></div>
<p>Alternatively, you could use the standard access operators, which behave like base R list and therefore return an empty <em>dict</em> (or <code>NULL</code>) if the index is not found.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">params</span><span class="op">[</span><span class="st">"x"</span><span class="op">]</span>
<span class="co"># {}</span>
<span class="va">params</span><span class="op">[[</span><span class="st">"x"</span><span class="op">]</span><span class="op">]</span>
<span class="co"># NULL</span>
<span class="va">params</span><span class="op">[</span><span class="st">"a"</span><span class="op">]</span>
<span class="co"># {a = (1L 2L 3L 4L ...)}</span>
<span class="va">params</span><span class="op">[[</span><span class="st">"a"</span><span class="op">]</span><span class="op">]</span>
<span class="co">#  [1]  1  2  3  4  5  6  7  8  9 10</span></code></pre></div>
<div id="default-values" class="section level3">
<h3 class="hasAnchor">
<a href="#default-values" class="anchor"></a>Default values</h3>
<p>A nice property of the <em>dict</em> is that it provides an easy and flexible way to manage default values.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/peek_at.html">peek_at</a></span><span class="op">(</span><span class="va">params</span>, <span class="st">"x"</span><span class="op">)</span>
<span class="co"># {}</span>
<span class="fu"><a href="../reference/peek_at.html">peek_at</a></span><span class="op">(</span><span class="va">params</span>, <span class="st">"x"</span>, .default <span class="op">=</span> <span class="fl">3</span><span class="op">:</span><span class="fl">1</span><span class="op">)</span>
<span class="co"># {x = (3L 2L 1L)}</span></code></pre></div>
<p>That is, if you <em>peek</em> at a non-existing parameter, by default an empty <em>dict</em> is returned, but with the option to explicitly set the default. This also works for multiple peeks.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/peek_at.html">peek_at</a></span><span class="op">(</span><span class="va">params</span>, <span class="st">"a"</span>, <span class="st">"x"</span>, <span class="st">"y"</span>, .default <span class="op">=</span> <span class="fl">3</span><span class="op">:</span><span class="fl">1</span><span class="op">)</span>
<span class="co"># {a = (1L 2L 3L 4L ...), x = (3L 2L 1L), y = (3L 2L 1L)}</span></code></pre></div>
</div>
</div>
<div id="remove" class="section level2">
<h2 class="hasAnchor">
<a href="#remove" class="anchor"></a>Remove</h2>
<p>Similar to the above examples, the user can control how removal of existing/non-existing parameters is handled. If you expect a parameter and want to be signaled if it was not there, use <code>delete</code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/delete_at.html">delete_at</a></span><span class="op">(</span><span class="va">params</span>, <span class="st">"x"</span><span class="op">)</span>
<span class="co"># Error: names(s) not found: 'x'</span>
<span class="fu"><a href="../reference/delete_at.html">delete_at</a></span><span class="op">(</span><span class="va">params</span>, <span class="st">"a"</span><span class="op">)</span> <span class="co"># ok</span>
<span class="co"># {b = "foo"}</span></code></pre></div>
<p>Otherwise to loosely delete a parameter, regardless of whether it exists or not, use <code>discard</code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/discard_at.html">discard_at</a></span><span class="op">(</span><span class="va">params</span>, <span class="st">"a"</span>, <span class="st">"x"</span><span class="op">)</span>
<span class="co"># {b = "foo"}</span></code></pre></div>
<p>It’s important to note, that the “base R list way” to delete elements does not work, because it just inserts a <code>NULL</code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">params</span><span class="op">[[</span><span class="st">"a"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NULL</span>

<span class="va">params</span>
<span class="co"># {a = NULL, b = "foo"}</span></code></pre></div>
</div>
<div id="merge" class="section level2">
<h2 class="hasAnchor">
<a href="#merge" class="anchor"></a>Merge</h2>
<p>Last but not least, <em>dict</em> allows to easily merge and/or update parameter lists.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">par1</span> <span class="op">=</span> <span class="fu"><a href="../reference/DictS3.html">dict</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fl">1</span>, b <span class="op">=</span> <span class="st">"foo"</span><span class="op">)</span>
<span class="va">par2</span> <span class="op">=</span> <span class="fu"><a href="../reference/DictS3.html">dict</a></span><span class="op">(</span>b <span class="op">=</span> <span class="st">"bar"</span>, x <span class="op">=</span> <span class="fl">2</span>, y <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>

<span class="fu"><a href="../reference/update.html">update</a></span><span class="op">(</span><span class="va">par1</span>, <span class="va">par2</span><span class="op">)</span>
<span class="co"># {a = 1, b = "bar", x = 2, y = 3}</span></code></pre></div>
<p>As can be seen, existing parameters are updated and new parameters added. Using <code>as.dict</code> you can also do this with ordinary lists.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/update.html">update</a></span><span class="op">(</span><span class="va">par1</span>, <span class="fu"><a href="../reference/DictS3.html">as.dict</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>b <span class="op">=</span> <span class="st">"my b"</span>, x <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co"># {a = 1, b = "my b", x = 100}</span></code></pre></div>
<p>That’s it. I hope, it will free you some time and safe some bugs next time you need to manage parameter lists.</p>
<p>As a very last note, keep in mind that since container version 1.0.0, <em>dict</em> elements are always sorted by their name, while you are still able to access elements by position (based on the sorted values).</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">d</span> <span class="op">=</span> <span class="fu"><a href="../reference/DictS3.html">dict</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span>, z <span class="op">=</span> <span class="fl">2</span>, a <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="va">d</span>
<span class="co"># {a = 3, x = 1, z = 2}</span>
<span class="va">d</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>
<span class="co"># [1] 3</span>
<span class="va">d</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>
<span class="co"># {x = 1, z = 2}</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://rpahl.github.io/about.html">Roman Pahl</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
