<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>When and how to use container • container</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="When and how to use container">
<meta property="og:description" content="container">
<meta property="og:image" content="https://github.com/rpahl/container/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">container</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/container.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/code-development.html">When and how to use container</a>
    </li>
    <li>
      <a href="../articles/manage-data-columns.html">Manage data columns with dict.table</a>
    </li>
    <li>
      <a href="../articles/parameter-list.html">Manage parameter lists with dict</a>
    </li>
    <li>
      <a href="../articles/reference-semantics.html">Reference semantics</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rpahl/container/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="code-development_files/header-attrs-2.11/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>When and how to use container</h1>
            
            <h4 class="date">2021-10-31</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/rpahl/container/blob/master/vignettes/code-development.Rmd"><code>vignettes/code-development.Rmd</code></a></small>
      <div class="hidden name"><code>code-development.Rmd</code></div>

    </div>

    
    
<div id="when-not-to-use-container" class="section level2">
<h2 class="hasAnchor">
<a href="#when-not-to-use-container" class="anchor"></a>When <em>not</em> to use container</h2>
<p>Don’t bother using the <code>container</code> framework if …</p>
<ul>
<li>
<em>speed</em> is of high importance.</li>
</ul>
<p>The <code>container</code> package is written in pure R and was never designed or optimized for speed. So if computation speed is critical for your application, you rather should fall back to base R <em>list</em> or use packages that were optimized for performance, such as the <a href="https://CRAN.R-project.org/package=collections">collections</a> package.</p>
<ul>
<li>your application is <em>simple</em>.</li>
</ul>
<p>If the complexity of your application is low, it is probably not worth adding the <code>container</code> dependency and, again, you are probably fine with just using base R lists or vectors.</p>
</div>
<div id="when-to-use-container" class="section level2">
<h2 class="hasAnchor">
<a href="#when-to-use-container" class="anchor"></a>When to use container</h2>
<p>Consider using the <code>container</code> framework over base <code>list</code> if you are looking for …</p>
<ul>
<li>lean but <strong>safe</strong> list operations in <strong>critical</strong> code, specifically to avoid
<ul>
<li>name clashes</li>
<li>producing unintended NULLs</li>
<li>accessing undefined list values</li>
</ul>
</li>
<li>
<strong>specialized</strong> data structures (deque, set, dict) that still provide a <strong>rich set</strong> of list operations.</li>
<li>lists with <a href="reference-semantics.html">reference semantics</a>.</li>
</ul>
</div>
<div id="how-to-use-container" class="section level2">
<h2 class="hasAnchor">
<a href="#how-to-use-container" class="anchor"></a>How to use container</h2>
<p>In the following sections we are going to touch each of the above points briefly with some examples.</p>
<div id="safe-list-operations" class="section level3">
<h3 class="hasAnchor">
<a href="#safe-list-operations" class="anchor"></a>Safe list operations</h3>
<p>Since R has always been used as an interactive tool, base R list operations are generous with respect to errors. This can result in unintended values.</p>
<p>In contrast, the container package provides additional functions for all basic operations that allow for fine control and avoid many pitfalls that can happen with lists.</p>
<div id="add-elements" class="section level4">
<h4 class="hasAnchor">
<a href="#add-elements" class="anchor"></a>Add elements</h4>
<p>New elements can be added “as usually” by concatenation or name.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">co</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ContainerS3.html">container</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">co</span><span class="op">[[</span><span class="st">"x"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span>
<span class="va">co</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">2</span><span class="op">)</span>
<span class="va">co</span>
<span class="co"># [x = 1, 2]</span></code></pre></div>
<p>In addition, the container package provides the add function, which allows to add new elements by name even if that name already exists.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/add.html">add</a></span><span class="op">(</span><span class="va">co</span>, x <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>  <span class="co"># same as c(co, container(x = 3))</span>
<span class="co"># [x = 1, 2, x = 3]</span></code></pre></div>
</div>
<div id="replace-elements" class="section level4">
<h4 class="hasAnchor">
<a href="#replace-elements" class="anchor"></a>Replace elements</h4>
<p>Basic replacement is done by name or position.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">co</span><span class="op">[[</span><span class="st">"x"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span>
<span class="va">co</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span>
<span class="va">co</span>
<span class="co"># [x = 0, 0]</span></code></pre></div>
<p>When adding elements at positions exceeding the list’s length, the list is extended and padded with NULLs if needed. In contrast, the container will not allow any index out of range.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">co</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">3</span>
<span class="co"># Error: index out of range (length = 2): 3</span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">co</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="st">"x"</span> <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="co"># or replace_at(co, "x", 0)</span>
<span class="va">co</span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">co</span> <span class="op">=</span> <span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="st">"x"</span> <span class="op">=</span> <span class="fl">9</span>, <span class="st">"y"</span> <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="co"># or replace_at(co, c("x", "y"), 9:10)</span>
<span class="va">co</span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">co</span> <span class="op">=</span> <span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="st">"z"</span> <span class="op">=</span> <span class="fl">11</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">co</span> <span class="op">=</span> <span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="st">"z"</span> <span class="op">=</span> <span class="fl">11</span>, .add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">co</span> <span class="op">=</span> <span class="fu"><a href="../reference/ContainerS3.html">container</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span>, y <span class="op">=</span> <span class="fl">2</span>, z <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="fu"><a href="../reference/add.html">add</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="specialized-data-structures" class="section level3">
<h3 class="hasAnchor">
<a href="#specialized-data-structures" class="anchor"></a>Specialized data structures</h3>
</div>
<div id="reference-semantics" class="section level3">
<h3 class="hasAnchor">
<a href="#reference-semantics" class="anchor"></a>Reference semantics</h3>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://rpahl.github.io/about.html">Roman Pahl</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
