<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Container operations for robust code • container</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Container operations for robust code">
<meta name="description" content="Use this vignette if you want to see how container operations can be used to make it safer and easier to work with list-like data structures. It describes the different methods to add, extract, replace, and remove elements and their nuances.
">
<meta property="og:description" content="Use this vignette if you want to see how container operations can be used to make it safer and easier to work with list-like data structures. It describes the different methods to add, extract, replace, and remove elements and their nuances.
">
<meta property="og:image" content="https://github.com/rpahl/container/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">container</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html" aria-label="home"><span class="fa fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/get-started.html">Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/index.html">Overview</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Get started</h6></li>
    <li><a class="dropdown-item" href="../articles/container.html">Introduction to container</a></li>
    <li><a class="dropdown-item" href="../articles/code-development.html">Container operations for robust code</a></li>
    <li><a class="dropdown-item" href="../articles/parameter-list.html">Manage parameter lists with dict</a></li>
    <li><a class="dropdown-item" href="../articles/manage-data-columns.html">Manage data columns with dict.table</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other</h6></li>
    <li><a class="dropdown-item" href="../articles/deque-set-dict.html">Deque, Set, and Dict</a></li>
    <li><a class="dropdown-item" href="../articles/reference-semantics.html">Reference semantics</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-my-packages" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">My Packages</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-my-packages">
<li><a class="external-link dropdown-item" href="https://rpahl.github.io/container/">container</a></li>
    <li><a class="external-link dropdown-item" href="https://rpahl.github.io/GroupSeq/">GroupSeq</a></li>
    <li><a class="external-link dropdown-item" href="https://rpahl.github.io/pipeflow/">pipeflow</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rpahl/pipeflow/" aria-label="github"><span class="fa fab fa-github"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://stackoverflow.com/users/8120617/rpahl" aria-label="stackoverflow"><span class="fa fab fa-stack-overflow"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://bsky.app/profile/rpahl.bsky.social" aria-label="bluesky"><span class="fa fab fa-bluesky"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://rpahl.github.io/r-some-blog/" aria-label="blog"><span class="fa fas fa-blog"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Container operations for robust code</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rpahl/container/blob/HEAD/vignettes/code-development.Rmd"><code>vignettes/code-development.Rmd</code></a></small>
      <div class="d-none name"><code>code-development.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="container-operations">Container operations<a class="anchor" aria-label="anchor" href="#container-operations"></a>
</h2>
<p>Since R has always been used as an interactive tool, base R list
operations are generous with respect to errors, which can lead to
undetected bugs when developing code. In contrast, the container package
provides additional functions for all basic operations that allow for
fine control to avoid many pitfalls that can happen with lists and will
usually result in more robust code.</p>
<div class="section level3">
<h3 id="add-elements">Add elements<a class="anchor" aria-label="anchor" href="#add-elements"></a>
</h3>
<p>New elements can be added “as usual” by concatenation or name.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">co</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ContainerS3.html">container</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">co</span><span class="op">[[</span><span class="st">"x"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">co</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">co</span></span>
<span><span class="co"># [x = 1, 2]</span></span></code></pre></div>
<p>In addition, the container package provides <em>add</em>, which
allows to add new elements by name even if that name exists already.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">co</span> <span class="op">=</span> <span class="fu"><a href="../reference/add.html">add</a></span><span class="op">(</span><span class="va">co</span>, x <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>  <span class="co"># same as c(co, container(x = 3))</span></span>
<span><span class="va">co</span></span>
<span><span class="co"># [x = 1, 2, x = 3]</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="replace-elements">Replace elements<a class="anchor" aria-label="anchor" href="#replace-elements"></a>
</h3>
<p>Basic replacement again can be done “as usual” by name or
position.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">co</span><span class="op">[[</span><span class="st">"x"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="va">co</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">12</span></span>
<span><span class="va">co</span></span>
<span><span class="co"># [x = 0, 12, x = 3]</span></span></code></pre></div>
<p>In contrast to base <em>lists</em>, the container will not allow to
add elements at positions longer than the length of the object.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">co</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">4</span></span>
<span><span class="co"># Error: index out of range (length = 3): 4</span></span></code></pre></div>
<p>If the name does not exist, the element is appended as known from
base lists.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">co</span><span class="op">[[</span><span class="st">"y"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">4</span></span>
<span><span class="va">co</span></span>
<span><span class="co"># [x = 0, 12, x = 3, y = 4]</span></span></code></pre></div>
<p>If you want to make sure that something is replaced,
<em>container</em> provides the function <em>replace_at</em>, which will
only replace elements if at names or positions that exist. The following
statements are all equal and show the different possibilities on how to
use <em>replace_at</em>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">co</span>, x <span class="op">=</span> <span class="fl">10</span>, y <span class="op">=</span> <span class="fl">13</span><span class="op">)</span>            <span class="co"># name = value pairs</span></span>
<span><span class="co"># [x = 10, 12, x = 3, y = 13]</span></span>
<span><span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span>,  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">13</span><span class="op">)</span><span class="op">)</span>   <span class="co"># names followed by values</span></span>
<span><span class="co"># [x = 10, 12, x = 3, y = 13]</span></span>
<span><span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span>,      <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">13</span><span class="op">)</span><span class="op">)</span>   <span class="co"># positions followed by values</span></span>
<span><span class="co"># [x = 10, 12, x = 3, y = 13]</span></span>
<span><span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">"y"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">13</span><span class="op">)</span><span class="op">)</span>   <span class="co"># mixed names/positions followed by values</span></span>
<span><span class="co"># [x = 10, 12, x = 3, y = 13]</span></span></code></pre></div>
<p>Now see how invalid indices are signaled.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">co</span>, z <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co"># Error: names(s) not found: 'z'</span></span>
<span><span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="st">"z"</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co"># Error: names(s) not found: 'z'</span></span>
<span><span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">5</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co"># Error: index out of range (length = 4): 5</span></span></code></pre></div>
<p>If you instead want elements at new names to be added, set
<code>.add = TRUE</code>. Invalid positional indices are still
signaled.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">co</span> <span class="op">=</span> <span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">co</span>, z <span class="op">=</span> <span class="fl">10</span>, .add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">co</span> <span class="op">=</span> <span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">7</span>, <span class="fl">10</span>, .add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># Error: index out of range (length = 5): 7</span></span>
<span><span class="va">co</span></span>
<span><span class="co"># [x = 0, 12, x = 3, y = 4, z = 10]</span></span></code></pre></div>
<p>It is also possible to <em>replace</em> elements by value, that is,
you specify the value (not the index) that should be replaced. Let’s
replace the 12 by “foo” and then 4 by <code>1:4</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">co</span> <span class="op">=</span> <span class="fu"><a href="../reference/replace.html">replace</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">12</span>, <span class="st">"foo"</span><span class="op">)</span></span>
<span><span class="va">co</span></span>
<span><span class="co"># [x = 0, "foo", x = 3, y = 4, z = 10]</span></span>
<span><span class="va">co</span> <span class="op">=</span> <span class="fu"><a href="../reference/replace.html">replace</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">4</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">co</span></span>
<span><span class="co"># [x = 0, "foo", x = 3, y = (1L 2L 3L 4L), z = 10]</span></span></code></pre></div>
<p>In an interactive R session you may want to apply the notation using
curly braces.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">co</span><span class="op">[[</span><span class="op">{</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">}</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span></span>
<span><span class="va">co</span></span>
<span><span class="co"># [x = 0, "foo", x = 3, y = (1L 2L), z = 10]</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="extract-elements">Extract elements<a class="anchor" aria-label="anchor" href="#extract-elements"></a>
</h3>
<p>First of all, standard extract operators apply as expected.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">co</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co"># [1] 0</span></span>
<span><span class="va">co</span><span class="op">[[</span><span class="st">"x"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co"># [1] 0</span></span>
<span><span class="va">co</span><span class="op">[</span><span class="fl">3</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="co"># [x = 3, y = (1L 2L), z = 10]</span></span>
<span><span class="va">co</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co"># [x = 0, y = (1L 2L), z = 10]</span></span></code></pre></div>
<p>Programmatically, the corresponding functions to select one or
multiple elements are named <em>at2</em> and <em>at</em>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/at2.html">at2</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co"># [1] 0</span></span>
<span><span class="fu"><a href="../reference/at2.html">at2</a></span><span class="op">(</span><span class="va">co</span>, <span class="st">"x"</span><span class="op">)</span></span>
<span><span class="co"># [1] 0</span></span>
<span><span class="fu"><a href="../reference/at.html">at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="co"># [x = 3, y = (1L 2L), z = 10]</span></span>
<span><span class="fu"><a href="../reference/at.html">at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># [x = 0, y = (1L 2L), z = 10]</span></span></code></pre></div>
<p>As before you can specify mixed indices via lists.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">indices</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">4</span>, <span class="st">"z"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/at.html">at</a></span><span class="op">(</span><span class="va">co</span>, <span class="va">indices</span><span class="op">)</span></span>
<span><span class="co"># [x = 0, y = (1L 2L), z = 10]</span></span></code></pre></div>
<p>Again, accessing non-existent names or positions is signaled with an
error.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/at2.html">at2</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co"># Error: index 10 exceeds length of Container, which is 5</span></span>
<span><span class="fu"><a href="../reference/at2.html">at2</a></span><span class="op">(</span><span class="va">co</span>, <span class="st">"a"</span><span class="op">)</span></span>
<span><span class="co"># Error: index 'a' not found</span></span>
<span><span class="fu"><a href="../reference/at.html">at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span></span>
<span><span class="co"># Error: index 6 exceeds length of Container, which is 5</span></span>
<span><span class="fu"><a href="../reference/at.html">at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"a"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Error: index 'a' not found</span></span></code></pre></div>
<p>With base R lists non-existent indices usually yield
<code>NULL</code>.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">l</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">l</span><span class="op">[[</span><span class="st">"a"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co"># NULL</span></span>
<span><span class="va">l</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span>
<span><span class="co"># [[1]]</span></span>
<span><span class="co"># NULL</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># [[2]]</span></span>
<span><span class="co"># NULL</span></span></code></pre></div>
<p>If needed, the (less strict) <em>list</em> access can be mimicked
with <em>peek_at</em> and <em>peek_at2</em>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/peek_at2.html">peek_at2</a></span><span class="op">(</span><span class="va">co</span>, <span class="st">"a"</span><span class="op">)</span></span>
<span><span class="co"># NULL</span></span>
<span><span class="fu"><a href="../reference/peek_at.html">peek_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">10</span>, <span class="fl">11</span><span class="op">)</span></span>
<span><span class="co"># []</span></span>
<span><span class="fu"><a href="../reference/peek_at.html">peek_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">5</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co"># [z = 10]</span></span></code></pre></div>
<p>As you see, one important difference is multiple access via
<em>peek_at</em> will not insert <code>NULL</code> values by default.
However, both functions in fact allow to specify the default value that
is returned if the index does not exist.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/peek_at2.html">peek_at2</a></span><span class="op">(</span><span class="va">co</span>, <span class="st">"a"</span>, default <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="co"># [1] -1</span></span>
<span></span>
<span><span class="fu"><a href="../reference/peek_at.html">peek_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="st">"z"</span>, <span class="st">"a"</span>, .default <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="co"># [z = 10, a = -1]</span></span>
<span><span class="fu"><a href="../reference/peek_at.html">peek_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">4</span><span class="op">:</span><span class="fl">8</span>, .default <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="co"># [y = (1L 2L), z = 10, NA, NA, NA]</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="remove-elements">Remove elements<a class="anchor" aria-label="anchor" href="#remove-elements"></a>
</h3>
<p>To remove elements in lists, they have to be replaced by
<code>NULL</code>.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">l</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">l</span></span>
<span><span class="co"># $a</span></span>
<span><span class="co"># [1] 1</span></span>
<span><span class="va">l</span><span class="op">[[</span><span class="st">"a"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="va">l</span></span>
<span><span class="co"># named list()</span></span></code></pre></div>
<p>With the container package this is done differently, as replacing by
<code>NULL</code> will not delete the element but literally replace it
by <code>NULL</code>.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">co</span><span class="op">[[</span><span class="st">"x"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span>
<span><span class="va">co</span></span>
<span><span class="co"># [x = NULL, "foo", x = 3, y = (1L 2L), z = 10]</span></span></code></pre></div>
<p>Instead, elements can be deleted by index (<em>delete_at</em>) or
value (<em>delete</em>) as follows.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/delete_at.html">delete_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">1</span>, <span class="st">"y"</span>, <span class="st">"z"</span><span class="op">)</span></span>
<span><span class="co"># ["foo", x = 3]</span></span>
<span><span class="fu"><a href="../reference/delete.html">delete</a></span><span class="op">(</span><span class="va">co</span>, <span class="cn">NULL</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">10</span><span class="op">)</span>   <span class="co"># same but remove by value</span></span>
<span><span class="co"># ["foo", x = 3]</span></span></code></pre></div>
<p>As before, invalid indices or missing values are signaled.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/delete_at.html">delete_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="st">"a"</span><span class="op">)</span></span>
<span><span class="co"># Error: names(s) not found: 'a'</span></span>
<span><span class="fu"><a href="../reference/delete_at.html">delete_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co"># Error: index out of range (length = 5): 10</span></span>
<span></span>
<span><span class="fu"><a href="../reference/delete.html">delete</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co"># Error: (1L 2L 3L) is not in Container</span></span></code></pre></div>
<p>If you need a less strict delete operation, use the <em>discard</em>
functions, which delete all valid indices/values and ignore the
rest.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/discard_at.html">discard_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">1</span>, <span class="st">"a"</span><span class="op">)</span></span>
<span><span class="co"># ["foo", x = 3, y = (1L 2L), z = 10]</span></span>
<span><span class="fu"><a href="../reference/discard_at.html">discard_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span></span>
<span><span class="co"># []</span></span>
<span></span>
<span><span class="fu"><a href="../reference/discard.html">discard</a></span><span class="op">(</span><span class="va">co</span>, <span class="cn">NULL</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="co"># ["foo", x = 3, z = 10]</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="combine-containers">Combine containers<a class="anchor" aria-label="anchor" href="#combine-containers"></a>
</h3>
<p>The <em>update</em> function is used to combine/merge two
containers.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">c1</span> <span class="op">=</span> <span class="fu"><a href="../reference/ContainerS3.html">container</a></span><span class="op">(</span><span class="fl">1</span>, b <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">c2</span> <span class="op">=</span> <span class="fu"><a href="../reference/ContainerS3.html">container</a></span><span class="op">(</span>   b <span class="op">=</span> <span class="fl">0</span>, c <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/update.html">update</a></span><span class="op">(</span><span class="va">c1</span>, <span class="va">c2</span><span class="op">)</span></span>
<span><span class="co"># [1, b = 0, c = 3]</span></span>
<span><span class="fu"><a href="../reference/update.html">update</a></span><span class="op">(</span><span class="va">c2</span>, <span class="va">c1</span><span class="op">)</span></span>
<span><span class="co"># [b = 2, c = 3, 1]</span></span></code></pre></div>
<p>With the container package this function is also provided for base R
lists.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">l1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span>, b <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">l2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>   b <span class="op">=</span> <span class="fl">0</span>, c <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/update.html">update</a></span><span class="op">(</span><span class="va">l1</span>, <span class="va">l2</span><span class="op">)</span></span>
<span><span class="co"># [[1]]</span></span>
<span><span class="co"># [1] 1</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># $b</span></span>
<span><span class="co"># [1] 0</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># $c</span></span>
<span><span class="co"># [1] 3</span></span>
<span><span class="fu"><a href="../reference/update.html">update</a></span><span class="op">(</span><span class="va">l2</span>, <span class="va">l1</span><span class="op">)</span></span>
<span><span class="co"># $b</span></span>
<span><span class="co"># [1] 2</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># $c</span></span>
<span><span class="co"># [1] 3</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># [[3]]</span></span>
<span><span class="co"># [1] 1</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://rpahl.github.io/r-some-blog/about.html" class="external-link">Roman Pahl</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
