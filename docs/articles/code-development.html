<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Container operations for robust code • container</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Container operations for robust code">
<meta property="og:description" content="Use this vignette if you want to see how container operations can be used to make it safer and easier to work with list-like data structures. It describes the different methods to add, extract, replace, and remove elements and their nuances.
">
<meta property="og:image" content="https://github.com/rpahl/container/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">container</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/container.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/code-development.html">Container operations for robust code</a>
    </li>
    <li>
      <a href="../articles/parameter-list.html">Manage parameter lists with dict</a>
    </li>
    <li>
      <a href="../articles/manage-data-columns.html">Manage data columns with dict.table</a>
    </li>
    <li>
      <a href="../articles/deque-set-dict.html">Deque, Set, and Dict</a>
    </li>
    <li>
      <a href="../articles/reference-semantics.html">Reference semantics</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rpahl/container/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="code-development_files/header-attrs-2.11/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Container operations for robust code</h1>
            
            <h4 class="date">2021-11-01</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/rpahl/container/blob/master/vignettes/code-development.Rmd"><code>vignettes/code-development.Rmd</code></a></small>
      <div class="hidden name"><code>code-development.Rmd</code></div>

    </div>

    
    
<div id="container-operations" class="section level2">
<h2 class="hasAnchor">
<a href="#container-operations" class="anchor"></a>Container operations</h2>
<p>Since R has always been used as an interactive tool, base R list operations are generous with respect to errors, which can lead to undetected bugs when developing code. In contrast, the container package provides additional functions for all basic operations that allow for fine control to avoid many pitfalls that can happen with lists and will usually result in more robust code.</p>
<div id="add-elements" class="section level3">
<h3 class="hasAnchor">
<a href="#add-elements" class="anchor"></a>Add elements</h3>
<p>New elements can be added “as usual” by concatenation or name.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">co</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ContainerS3.html">container</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">co</span><span class="op">[[</span><span class="st">"x"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span>
<span class="va">co</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">2</span><span class="op">)</span>
<span class="va">co</span>
<span class="co"># [x = 1, 2]</span></code></pre></div>
<p>In addition, the container package provides <em>add</em>, which allows to add new elements by name even if that name exists already.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">co</span> <span class="op">=</span> <span class="fu"><a href="../reference/add.html">add</a></span><span class="op">(</span><span class="va">co</span>, x <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>  <span class="co"># same as c(co, container(x = 3))</span>
<span class="va">co</span>
<span class="co"># [x = 1, 2, x = 3]</span></code></pre></div>
</div>
<div id="replace-elements" class="section level3">
<h3 class="hasAnchor">
<a href="#replace-elements" class="anchor"></a>Replace elements</h3>
<p>Basic replacement again can be done “as usual” by name or position.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">co</span><span class="op">[[</span><span class="st">"x"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">0</span>
<span class="va">co</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">12</span>
<span class="va">co</span>
<span class="co"># [x = 0, 12, x = 3]</span></code></pre></div>
<p>In contrast to base <em>lists</em>, the container will not allow to add elements at positions longer than the length of the object.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">co</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">4</span>
<span class="co"># Error: index out of range (length = 3): 4</span></code></pre></div>
<p>If the name does not exist, the element is appended as known from base lists.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">co</span><span class="op">[[</span><span class="st">"y"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">4</span>
<span class="va">co</span>
<span class="co"># [x = 0, 12, x = 3, y = 4]</span></code></pre></div>
<p>If you want to make sure that something is replaced, <em>container</em> provides the function <em>replace_at</em>, which will only replace elements if at names or positions that exist. The following statements are all equal and show the different possibilities on how to use <em>replace_at</em>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">co</span>, x <span class="op">=</span> <span class="fl">10</span>, y <span class="op">=</span> <span class="fl">13</span><span class="op">)</span>            <span class="co"># name = value pairs</span>
<span class="co"># [x = 10, 12, x = 3, y = 13]</span>
<span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span>,  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">13</span><span class="op">)</span><span class="op">)</span>   <span class="co"># names followed by values</span>
<span class="co"># [x = 10, 12, x = 3, y = 13]</span>
<span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span>,      <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">13</span><span class="op">)</span><span class="op">)</span>   <span class="co"># positions followed by values</span>
<span class="co"># [x = 10, 12, x = 3, y = 13]</span>
<span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">"y"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">13</span><span class="op">)</span><span class="op">)</span>   <span class="co"># mixed names/positions followed by values</span>
<span class="co"># [x = 10, 12, x = 3, y = 13]</span></code></pre></div>
<p>Now see how invalid indices are signaled.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">co</span>, z <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>
<span class="co"># Error: names(s) not found: 'z'</span>
<span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="st">"z"</span>, <span class="fl">10</span><span class="op">)</span>
<span class="co"># Error: names(s) not found: 'z'</span>
<span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">5</span>, <span class="fl">10</span><span class="op">)</span>
<span class="co"># Error: index out of range (length = 4): 5</span></code></pre></div>
<p>If you instead want elements at new names to be added, set <code>.add = TRUE</code>. Invalid positional indices are still signaled.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">co</span> <span class="op">=</span> <span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">co</span>, z <span class="op">=</span> <span class="fl">10</span>, .add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">co</span> <span class="op">=</span> <span class="fu"><a href="../reference/replace_at.html">replace_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">7</span>, <span class="fl">10</span>, .add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co"># Error: index out of range (length = 5): 7</span>
<span class="va">co</span>
<span class="co"># [x = 0, 12, x = 3, y = 4, z = 10]</span></code></pre></div>
<p>It is also possible to <em>replace</em> elements by value, that is, you specify the value (not the index) that should be replaced. Let’s replace the 12 by “foo” and then 4 by <code>1:4</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">co</span> <span class="op">=</span> <span class="fu"><a href="../reference/replace.html">replace</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">12</span>, <span class="st">"foo"</span><span class="op">)</span>
<span class="va">co</span>
<span class="co"># [x = 0, "foo", x = 3, y = 4, z = 10]</span>
<span class="va">co</span> <span class="op">=</span> <span class="fu"><a href="../reference/replace.html">replace</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">4</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>
<span class="va">co</span>
<span class="co"># [x = 0, "foo", x = 3, y = (1L 2L 3L 4L), z = 10]</span></code></pre></div>
<p>In an interactive R session you may want to apply the notation using curly braces.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">co</span><span class="op">[[</span><span class="op">{</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">}</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>
<span class="va">co</span>
<span class="co"># [x = 0, "foo", x = 3, y = (1L 2L), z = 10]</span></code></pre></div>
</div>
<div id="extract-elements" class="section level3">
<h3 class="hasAnchor">
<a href="#extract-elements" class="anchor"></a>Extract elements</h3>
<p>First of all, standard extract operators apply as expected.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">co</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>
<span class="co"># [1] 0</span>
<span class="va">co</span><span class="op">[[</span><span class="st">"x"</span><span class="op">]</span><span class="op">]</span>
<span class="co"># [1] 0</span>
<span class="va">co</span><span class="op">[</span><span class="fl">3</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>
<span class="co"># [x = 3, y = (1L 2L), z = 10]</span>
<span class="va">co</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span><span class="op">)</span><span class="op">]</span>
<span class="co"># [x = 0, y = (1L 2L), z = 10]</span></code></pre></div>
<p>Programmatically, the corresponding functions to select one or multiple elements are named <em>at2</em> and <em>at</em>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/at2.html">at2</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">1</span><span class="op">)</span>
<span class="co"># [1] 0</span>
<span class="fu"><a href="../reference/at2.html">at2</a></span><span class="op">(</span><span class="va">co</span>, <span class="st">"x"</span><span class="op">)</span>
<span class="co"># [1] 0</span>
<span class="fu"><a href="../reference/at.html">at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span>
<span class="co"># [x = 3, y = (1L 2L), z = 10]</span>
<span class="fu"><a href="../reference/at.html">at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span><span class="op">)</span><span class="op">)</span>
<span class="co"># [x = 0, y = (1L 2L), z = 10]</span></code></pre></div>
<p>As before you can specify mixed indices via lists.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">indices</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fl">4</span>, <span class="st">"z"</span><span class="op">)</span>
<span class="fu"><a href="../reference/at.html">at</a></span><span class="op">(</span><span class="va">co</span>, <span class="va">indices</span><span class="op">)</span>
<span class="co"># [x = 0, y = (1L 2L), z = 10]</span></code></pre></div>
<p>Again, accessing non-existent names or positions is signaled with an error.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/at2.html">at2</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">10</span><span class="op">)</span>
<span class="co"># Error: index 10 exceeds length of Container, which is 5</span>
<span class="fu"><a href="../reference/at2.html">at2</a></span><span class="op">(</span><span class="va">co</span>, <span class="st">"a"</span><span class="op">)</span>
<span class="co"># Error: index 'a' not found</span>
<span class="fu"><a href="../reference/at.html">at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span>
<span class="co"># Error: index 6 exceeds length of Container, which is 5</span>
<span class="fu"><a href="../reference/at.html">at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"a"</span><span class="op">)</span><span class="op">)</span>
<span class="co"># Error: index 'a' not found</span></code></pre></div>
<p>With base R lists non-existent indices usually yield <code>NULL</code>.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">l</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">l</span><span class="op">[[</span><span class="st">"a"</span><span class="op">]</span><span class="op">]</span>
<span class="co"># NULL</span>
<span class="va">l</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>
<span class="co"># [[1]]</span>
<span class="co"># NULL</span>
<span class="co"># </span>
<span class="co"># [[2]]</span>
<span class="co"># NULL</span></code></pre></div>
<p>If needed, the (less strict) <em>list</em> access can be mimicked with <em>peek_at</em> and <em>peek_at2</em>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/peek_at2.html">peek_at2</a></span><span class="op">(</span><span class="va">co</span>, <span class="st">"a"</span><span class="op">)</span>
<span class="co"># NULL</span>
<span class="fu"><a href="../reference/peek_at.html">peek_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">10</span>, <span class="fl">11</span><span class="op">)</span>
<span class="co"># []</span>
<span class="fu"><a href="../reference/peek_at.html">peek_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">5</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span>
<span class="co"># [z = 10]</span></code></pre></div>
<p>As you see, one important difference is multiple access via <em>peek_at</em> will not insert <code>NULL</code> values by default. However, both functions in fact allow to specify the default value that is returned if the index does not exist.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/peek_at2.html">peek_at2</a></span><span class="op">(</span><span class="va">co</span>, <span class="st">"a"</span>, default <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span>
<span class="co"># [1] -1</span>
<span class="fu"><a href="../reference/peek_at.html">peek_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="st">"z"</span>, <span class="st">"a"</span>, .default <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span>
<span class="co"># [z = 10, a = -1]</span>
<span class="fu"><a href="../reference/peek_at.html">peek_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">4</span><span class="op">:</span><span class="fl">8</span>, .default <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>
<span class="co"># [y = (1L 2L), z = 10, NA, NA, NA]</span></code></pre></div>
</div>
<div id="remove-elements" class="section level3">
<h3 class="hasAnchor">
<a href="#remove-elements" class="anchor"></a>Remove elements</h3>
<p>To remove elements in lists, they have to be replaced by <code>NULL</code>.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">l</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>
<span class="va">l</span>
<span class="co"># $a</span>
<span class="co"># [1] 1</span>
<span class="va">l</span><span class="op">[[</span><span class="st">"a"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NULL</span>
<span class="va">l</span>
<span class="co"># named list()</span></code></pre></div>
<p>With the container package this is done differently, as replacing by <code>NULL</code> will not delete the element but literally replace it by <code>NULL</code>.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">co</span><span class="op">[[</span><span class="st">"x"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NULL</span>
<span class="va">co</span>
<span class="co"># [x = NULL, "foo", x = 3, y = (1L 2L), z = 10]</span></code></pre></div>
<p>Instead, elements can be deleted by index (<em>delete_at</em>) or value (<em>delete</em>) as follows.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/delete_at.html">delete_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">1</span>, <span class="st">"y"</span>, <span class="st">"z"</span><span class="op">)</span>
<span class="co"># ["foo", x = 3]</span>
<span class="fu"><a href="../reference/delete.html">delete</a></span><span class="op">(</span><span class="va">co</span>, <span class="cn">NULL</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">10</span><span class="op">)</span>   <span class="co"># same but remove by value</span>
<span class="co"># ["foo", x = 3]</span></code></pre></div>
<p>As before, invalid indices or missing values are signaled.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/delete_at.html">delete_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="st">"a"</span><span class="op">)</span>
<span class="co"># Error: names(s) not found: 'a'</span>
<span class="fu"><a href="../reference/delete_at.html">delete_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">10</span><span class="op">)</span>
<span class="co"># Error: index out of range (length = 5): 10</span>
<span class="fu"><a href="../reference/delete.html">delete</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>
<span class="co"># Error: (1L 2L 3L) is not in Container</span></code></pre></div>
<p>If you need a less strict delete operation, use the <em>discard</em> functions, which delete all valid indices/values and ignore the rest.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/discard_at.html">discard_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">1</span>, <span class="st">"a"</span><span class="op">)</span>
<span class="co"># ["foo", x = 3, y = (1L 2L), z = 10]</span>
<span class="fu"><a href="../reference/discard_at.html">discard_at</a></span><span class="op">(</span><span class="va">co</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span>
<span class="co"># []</span>
<span class="fu"><a href="../reference/discard.html">discard</a></span><span class="op">(</span><span class="va">co</span>, <span class="cn">NULL</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>
<span class="co"># ["foo", x = 3, z = 10]</span></code></pre></div>
</div>
<div id="combine-containers" class="section level3">
<h3 class="hasAnchor">
<a href="#combine-containers" class="anchor"></a>Combine containers</h3>
<p>The <em>update</em> function is used to combine/merge two containers.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">c1</span> <span class="op">=</span> <span class="fu"><a href="../reference/ContainerS3.html">container</a></span><span class="op">(</span><span class="fl">1</span>, b <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="va">c2</span> <span class="op">=</span> <span class="fu"><a href="../reference/ContainerS3.html">container</a></span><span class="op">(</span>   b <span class="op">=</span> <span class="fl">0</span>, c <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>

<span class="fu"><a href="../reference/update.html">update</a></span><span class="op">(</span><span class="va">c1</span>, <span class="va">c2</span><span class="op">)</span>
<span class="co"># [1, b = 0, c = 3]</span>
<span class="fu"><a href="../reference/update.html">update</a></span><span class="op">(</span><span class="va">c2</span>, <span class="va">c1</span><span class="op">)</span>
<span class="co"># [b = 2, c = 3, 1]</span></code></pre></div>
<p>With the container package this function is also provided for base R lists.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">l1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="fl">1</span>, b <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="va">l2</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>   b <span class="op">=</span> <span class="fl">0</span>, c <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>

<span class="fu"><a href="../reference/update.html">update</a></span><span class="op">(</span><span class="va">l1</span>, <span class="va">l2</span><span class="op">)</span>
<span class="co"># [[1]]</span>
<span class="co"># [1] 1</span>
<span class="co"># </span>
<span class="co"># $b</span>
<span class="co"># [1] 0</span>
<span class="co"># </span>
<span class="co"># $c</span>
<span class="co"># [1] 3</span>
<span class="fu"><a href="../reference/update.html">update</a></span><span class="op">(</span><span class="va">l2</span>, <span class="va">l1</span><span class="op">)</span>
<span class="co"># $b</span>
<span class="co"># [1] 2</span>
<span class="co"># </span>
<span class="co"># $c</span>
<span class="co"># [1] 3</span>
<span class="co"># </span>
<span class="co"># [[3]]</span>
<span class="co"># [1] 1</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://rpahl.github.io/about.html">Roman Pahl</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
